!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){t(2);var r,i,a=t(3),o=t(5);function l(e){if(Array.isArray(e)){var n=this,t=[];return a.each(e,e=>{t.push(n.ScriptLoader(e))}),Promise.all(t)}return new Promise((n,t)=>{var r=!1,i=document.getElementsByTagName("script"),a=i[i.length-1],o=document.createElement("script");o.type="text/javascript",o.src=e,o.defer=!0,o.onload=o.onreadystatechange=(()=>{r||readyState&&"complete"!==readyState||(r=!0,n(this))}),o.onerror=o.onabort=t,a.parentNode.insertBefore(o,a.nextSibling)})}function c(){var e=navigator.userAgent.match(/chrome/i),n=navigator.userAgent.match(/opr/i);return!!e&&!!(e.length>0||n)}i=c();function u(e){if(c())return new Promise((e,n)=>o.GetCertificates().then(n=>e(n)).catch(e=>n(e)));new Promise((e,n)=>{var t=o.GetCertificates();console.log("certList",t),"string"==typeof t?n(t):e(t)}).catch(e=>console.log(e))}function s(){return c()?new Promise((e,n)=>o.PluginInstaled().then(n=>e(n)).catch(e=>n(e))):new Promise(function(e,n){setTimeout(()=>{a.isUndefined(o.PluginInstaled())&&n("Плагин не установлен");var t=o.PluginInstaled();"boolean"==typeof t?n(t):e(t)},0)}.catch(e=>console.log(e)))}r=l("js/cadesplugin-api.js");var d={IsPluginEnable:s,ScriptLoader:l,IsChromiumBased:c,Then:function(e,n){r.then(()=>{}),r.then(()=>{i?cadesplugin.then(()=>{s().then(()=>e(cadesplugin),()=>n("Не установлен Крипто-про CSP"))},e=>n(e)):(window.addEventListener("message",t=>{"cadesplugin_loaded"===t.data?e(cadesplugin):"cadesplugin_load_error"===t.data&&n("cadesplugin_load_error"),e(cadesplugin)},!1),window.postMessage("cadesplugin_echo_request","*"))},n)},SignMessage:function(e,n){return{then:(t,r)=>{if(i)o.Sign(e,n).then(e=>t(e)).catch(e=>r(e));else try{var a=o.Sign(e,n);a?t(a):r(a)}catch(e){r(e)}}}},SignXmlCert:function(e,n){return{then:(t,r)=>{if(i)SignXml(e,n).then(e=>t(e)).catch(e=>r(e));else try{var a=SignXml(e,n);a?t(a):r(a)}catch(e){r(e)}}}},Dec:function(e,n){return{then:(t,r)=>{if(i)Decrypt(e,n).then(e=>t(e)).catch(e=>r(e));else try{var a=Decrypt(e,n);a?t(a):r(a)}catch(e){r(e)}}}},GetCertificate:u,async:o};e.exports=d},function(module,exports){!function(){var pluginObject={},plugin_reject,plugin_resolve,cadesplugin,plugin_resolved=0,isOpera=0,isYaBrowser=0,isFireFox=0,failed_extensions=0,canPromise=!!Promise;function cadespluginConstructor(){if(canPromise)return cadesplugin=new Promise((e,n)=>{plugin_resolve=e,plugin_reject=n});cadesplugin={}}function asyncConstructor(e){return new Promise((n,t)=>{setTimeout(()=>{n?n(e):t("asyncConstructor is not found")},2e3)})}function cpcsp_console_log(e,n){"undefined"!=typeof console&&e<=cadesplugin.current_log_level&&(e===cadesplugin.LOG_LEVEL_DEBUG&&console.log("DEBUG: %s",n),e===cadesplugin.LOG_LEVEL_INFO&&console.info("INFO: %s",n),e===cadesplugin.LOG_LEVEL_ERROR&&console.error("ERROR: %s",n))}function set_log_level(e){e===cadesplugin.LOG_LEVEL_DEBUG||e===cadesplugin.LOG_LEVEL_INFO||e===cadesplugin.LOG_LEVEL_ERROR?(cadesplugin.current_log_level=e,cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_DEBUG&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = DEBUG"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_INFO&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = INFO"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_ERROR&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = ERROR"),isNativeMessageSupported()&&(cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_DEBUG&&window.postMessage("set_log_level=debug","*"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_INFO&&window.postMessage("set_log_level=info","*"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_ERROR&&window.postMessage("set_log_level=error","*"))):cpcsp_console_log(cadesplugin.LOG_LEVEL_ERROR,"cadesplugin_api.js: Incorrect log_level: "+e)}function set_varantValues(){cadesplugin.CAPICOM_MY_STORE="My",cadesplugin.CAPICOM_LOCAL_MACHINE_STORE=1,cadesplugin.CAPICOM_CURRENT_USER_STORE=2,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED=2,cadesplugin.CAPICOM_ENCODE_BASE64=0,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT=0,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN=1,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY=2,cadesplugin.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME=0,cadesplugin.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME=1,cadesplugin.CAPICOM_CERTIFICATE_FIND_SHA1_HASH=0,cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,cadesplugin.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME=2,cadesplugin.CAPICOM_CERTIFICATE_FIND_ROOT_NAME=3,cadesplugin.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME=4,cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENSION=5,cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY=6,cadesplugin.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY=7,cadesplugin.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY=8,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_VALID=9,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID=10,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED=11,cadesplugin.CAPICOM_CERTIFICATE_FIND_KEY_USAGE=12,cadesplugin.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE=128,cadesplugin.CAPICOM_PROPID_ENHKEY_USAGE=9,cadesplugin.CAPICOM_OID_OTHER=0,cadesplugin.CAPICOM_OID_KEY_USAGE_EXTENSION=10,cadesplugin.CAPICOM_EKU_CLIENT_AUTH=2,cadesplugin.CAPICOM_EKU_SMARTCARD_LOGON=5,cadesplugin.CAPICOM_EKU_OTHER=0,cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0,cadesplugin.CADESCOM_LOCAL_MACHINE_STORE=1,cadesplugin.CADESCOM_CURRENT_USER_STORE=2,cadesplugin.CADESCOM_CONTAINER_STORE=100,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED=0,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING=1,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE=2,cadesplugin.CADESCOM_CADES_DEFAULT=0,cadesplugin.CADESCOM_CADES_BES=1,cadesplugin.CADESCOM_CADES_T=5,cadesplugin.CADESCOM_CADES_X_LONG_TYPE_1=93,cadesplugin.CADESCOM_ENCODE_BASE64=0,cadesplugin.CADESCOM_ENCODE_BINARY=1,cadesplugin.CADESCOM_ENCODE_ANY=-1,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2,cadesplugin.CADESCOM_ATTRIBUTE_OTHER=-1,cadesplugin.CADESCOM_STRING_TO_UCS2LE=0,cadesplugin.CADESCOM_BASE64_TO_BINARY=1,cadesplugin.CADESCOM_DISPLAY_DATA_NONE=0,cadesplugin.CADESCOM_DISPLAY_DATA_CONTENT=1,cadesplugin.CADESCOM_DISPLAY_DATA_ATTRIBUTE=2,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC2=0,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC4=1,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_DES=2,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_3DES=3,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_AES=4,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89=25,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA1=0,cadesplugin.CADESCOM_HASH_ALGORITHM_MD2=1,cadesplugin.CADESCOM_HASH_ALGORITHM_MD4=2,cadesplugin.CADESCOM_HASH_ALGORITHM_MD5=3,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_256=4,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_384=5,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_512=6,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411=100,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256=101,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512=102,cadesplugin.LOG_LEVEL_DEBUG=4,cadesplugin.LOG_LEVEL_INFO=2,cadesplugin.LOG_LEVEL_ERROR=1,cadesplugin.XmlDsigGost3410UrlObsovare="http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411",cadesplugin.XmlDsigGost3411UrlObsovare="http://www.w3.org/2001/04/xmldsig-more#gostr3411",cadesplugin.XmlDsigGost3410Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411",cadesplugin.XmlDsigGost3411Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411"}function async_spawn(e){function n(e,n){var a;try{a=t[e](n)}catch(e){return Promise.reject(e)}return a.done?a.value:Promise.resolve(a.value).then(r,i)}var t=e(Array.prototype.slice.call(arguments,1)),r=n.bind(n,"next"),i=n.bind(n,"throw");return r()}function isIE(){return"Microsoft Internet Explorer"===navigator.appName||navigator.userAgent.match(/Trident\/./i)}function isIOS(){return navigator.userAgent.match(/ipod/i)||navigator.userAgent.match(/ipad/i)||navigator.userAgent.match(/iphone/i)}function isNativeMessageSupported(){var e=navigator.userAgent.match(/chrome/i);return isOpera=navigator.userAgent.match(/opr/i),isYaBrowser=navigator.userAgent.match(/YaBrowser/i),!(!(isFireFox=navigator.userAgent.match(/Firefox/i))||!window.allow_firefox_cadesplugin_async)||!!e&&(e.length>0||!isOpera)}function CreateObject(e){if(isIOS())return call_ru_cryptopro_npcades_10_native_bridge("CreateObject",[e]);if(isIE()){if(e.match(/X509Enrollment/i))try{document.getElementById("certEnrollClassFactory");return objCertEnrollClassFactory.CreateObject(e)}catch(e){throw"Для создания обьектов X509Enrollment следует настроить веб-узел на использование проверки подлинности по протоколу HTTPS"}try{return document.getElementById("webClassFactory").CreateObject(e)}catch(n){return new ActiveXObject(e)}}return pluginObject.CreateObject(e)}function decimalToHexString(e){return e<0&&(e=4294967295+e+1),e.toString(16).toUpperCase()}function GetMessageFromException(e){var n=e.message;return n?e.number&&(n+=" (0x"+decimalToHexString(e.number)+")"):n=e,n}function getLastError(e){if(isNativeMessageSupported()||isIE()||isIOS())return GetMessageFromException(e);try{return pluginObject.getLastError()}catch(n){return GetMessageFromException(e)}}function CreateObjectAsync(e){return pluginObject.CreateObjectAsync(e)}cadespluginConstructor();var ru_cryptopro_npcades_10_native_bridge={callbacksCount:1,callbacks:{},resultForCallback:function(e,n){var t=ru_cryptopro_npcades_10_native_bridge.callbacks[e];t&&t.apply(null,n)},call:function(e,n,t){var r=t&&"function"==typeof t,i=r?ru_cryptopro_npcades_10_native_bridge.callbacksCount++:0;r&&(ru_cryptopro_npcades_10_native_bridge.callbacks[i]=t);var a=document.createElement("IFRAME"),o=new Array("_CPNP_handle");try{a.setAttribute("src","cpnp-js-call:"+e+":"+i+":"+encodeURIComponent(JSON.stringify(n,o)))}catch(e){alert(e)}document.documentElement.appendChild(a),a.parentNode.removeChild(a),a=null}};function call_ru_cryptopro_npcades_10_native_bridge(functionName,array){var tmpobj,ex;if(ru_cryptopro_npcades_10_native_bridge.call(functionName,array,function(e,response){ex=e;var str="tmpobj="+response;eval(str),"string"==typeof tmpobj&&(tmpobj=tmpobj.replace(/\\\n/gm,"\n"),tmpobj=tmpobj.replace(/\\\r/gm,"\r"))}),ex)throw ex;return tmpobj}function install_opera_extension(){window.cadesplugin_skip_extension_install?plugin_loaded_error("Плагин недоступен"):document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("div");e.id="cadesplugin_ovr",e.style="visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)",e.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button><p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо установить расширение из каталога дополнений Opera.<p><button id='cadesplugin_install' style='font:12px Arial'>Установить расширение</button></p></div>",document.getElementsByTagName("Body")[0].appendChild(e),document.getElementById("cadesplugin_install").addEventListener("click",function(e){opr.addons.installExtension("epebfcehmdedogndhlcacafjaacknbcm",function(){document.getElementById("cadesplugin_ovr").style.visibility="hidden",location.reload()},function(){})}),document.getElementById("cadesplugin_close_install").addEventListener("click",function(){plugin_loaded_error("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"}),e.addEventListener("click",function(){plugin_loaded_error("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"}),e.style.visibility="visible",document.getElementById("cadesplugin_ovr_item").addEventListener("click",function(e){e.stopPropagation()})})}function firefox_nmcades_onload(){cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded,plugin_loaded_error)}function nmcades_api_onload(){window.postMessage("cadesplugin_echo_request","*"),window.addEventListener("message",function(e){if("string"==typeof e.data&&e.data.match("cadesplugin_loaded"))if(isFireFox){var n=e.data.substring(e.data.indexOf("url:")+4),t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",n),t.onerror=plugin_loaded_error,t.onload=firefox_nmcades_onload,document.getElementsByTagName("head")[0].appendChild(t)}else cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded,plugin_loaded_error)},!1)}function load_extension(){if(isFireFox)nmcades_api_onload();else{var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js"),e.onerror=plugin_loaded_error,e.onload=nmcades_api_onload,document.getElementsByTagName("head")[0].appendChild(e),(e=document.createElement("script")).setAttribute("type","text/javascript"),e.setAttribute("src","chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js"),e.onerror=plugin_loaded_error,e.onload=nmcades_api_onload,document.getElementsByTagName("head")[0].appendChild(e)}}function load_npapi_plugin(){var e=document.createElement("object");if(e.setAttribute("id","cadesplugin_object"),e.setAttribute("type","application/x-cades"),e.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(e),pluginObject=document.getElementById("cadesplugin_object"),isIE()){var n=document.createElement("object");n.setAttribute("id","certEnrollClassFactory"),n.setAttribute("classid","clsid:884e2049-217d-11da-b2a4-000e7bbb2b09"),n.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(n);var t=document.createElement("object");t.setAttribute("id","webClassFactory"),t.setAttribute("classid","clsid:B04C8637-10BD-484E-B0DA-B8A039F60024"),t.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(t)}}function plugin_loaded(){plugin_resolved=1,canPromise?plugin_resolve():window.postMessage("cadesplugin_loaded","*")}function plugin_loaded_error(e){if(isNativeMessageSupported()){if(++failed_extensions<2)return;if(isOpera&&(void 0===e||"object"==typeof e))return void install_opera_extension()}void 0!==e&&"object"!=typeof e||(e="Плагин недоступен"),plugin_resolved=1,canPromise?plugin_reject(e):window.postMessage("cadesplugin_load_error","*")}function check_load_timeout(){1!==plugin_resolved&&(plugin_resolved=1,canPromise?plugin_reject("Истекло время ожидания загрузки плагина"):window.postMessage("cadesplugin_load_error","*"))}function createPromise(e){return new Promise(e)}function check_npapi_plugin(){try{CreateObject("CAdESCOM.About");plugin_loaded()}catch(n){document.getElementById("cadesplugin_object").style.display="none";var e=navigator.mimeTypes["application/x-cades"];if(e)plugin_loaded_error(e.enabledPlugin?"Плагин загружен, но не создаются обьекты":"Ошибка при загрузке плагина");else plugin_loaded_error("Плагин недоступен")}}function check_plugin_working(){var e=document.createElement("div");e.innerHTML="\x3c!--[if lt IE 9]><iecheck></iecheck><![endif]--\x3e",1===e.getElementsByTagName("iecheck").length?plugin_loaded_error("Internet Explorer версии 8 и ниже не поддерживается"):isNativeMessageSupported()?load_extension():canPromise?window.addEventListener("load",function(e){load_npapi_plugin(),check_npapi_plugin()},!1):window.addEventListener("message",function(e){"cadesplugin_echo_request"===e.data&&(load_npapi_plugin(),check_npapi_plugin())},!1)}function set_pluginObject(e){pluginObject=e}cadesplugin.JSModuleVersion="2.1.0",cadesplugin.async_spawn=async_spawn,cadesplugin.set=set_pluginObject,cadesplugin.set_log_level=set_log_level,cadesplugin.getLastError=getLastError,isNativeMessageSupported()&&asyncConstructor(CreateObjectAsync).then(e=>{cadesplugin.CreateObjectAsync=e}),isNativeMessageSupported()||asyncConstructor(CreateObject).then(e=>cadesplugin.CreateObject=e),window.cadesplugin_load_timeout?setTimeout(check_load_timeout,window.cadesplugin_load_timeout):setTimeout(check_load_timeout,2e4),set_varantValues(),cadesplugin.current_log_level=cadesplugin.LOG_LEVEL_ERROR,window.cadesplugin=cadesplugin,check_plugin_working()}()},function(e,n,t){(function(e){var t;!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},i=r._,a=Array.prototype,o=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,u=a.slice,s=o.toString,d=o.hasOwnProperty,p=Array.isArray,_=Object.keys,f=Object.create,g=function(){},C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};n.nodeType?r._=C:(!e.nodeType&&e.exports&&(n=e.exports=C),n._=C),C.VERSION="1.9.1";var E,y=function(e,n,t){if(void 0===n)return e;switch(null==t?3:t){case 1:return function(t){return e.call(n,t)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,a){return e.call(n,t,r,i,a)}}return function(){return e.apply(n,arguments)}},v=function(e,n,t){return C.iteratee!==E?C.iteratee(e,n):null==e?C.identity:C.isFunction(e)?y(e,n,t):C.isObject(e)&&!C.isArray(e)?C.matcher(e):C.property(e)};C.iteratee=E=function(e,n){return v(e,n,1/0)};var O=function(e,n){return n=null==n?e.length-1:+n,function(){for(var t=Math.max(arguments.length-n,0),r=Array(t),i=0;i<t;i++)r[i]=arguments[i+n];switch(n){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var a=Array(n+1);for(i=0;i<n;i++)a[i]=arguments[i];return a[n]=r,e.apply(this,a)}},A=function(e){if(!C.isObject(e))return{};if(f)return f(e);g.prototype=e;var n=new g;return g.prototype=null,n},m=function(e){return function(n){return null==n?void 0:n[e]}},h=function(e,n){return null!=e&&d.call(e,n)},I=function(e,n){for(var t=n.length,r=0;r<t;r++){if(null==e)return;e=e[n[r]]}return t?e:void 0},b=Math.pow(2,53)-1,S=m("length"),T=function(e){var n=S(e);return"number"==typeof n&&n>=0&&n<=b};C.each=C.forEach=function(e,n,t){var r,i;if(n=y(n,t),T(e))for(r=0,i=e.length;r<i;r++)n(e[r],r,e);else{var a=C.keys(e);for(r=0,i=a.length;r<i;r++)n(e[a[r]],a[r],e)}return e},C.map=C.collect=function(e,n,t){n=v(n,t);for(var r=!T(e)&&C.keys(e),i=(r||e).length,a=Array(i),o=0;o<i;o++){var l=r?r[o]:o;a[o]=n(e[l],l,e)}return a};var M=function(e){return function(n,t,r,i){var a=arguments.length>=3;return function(n,t,r,i){var a=!T(n)&&C.keys(n),o=(a||n).length,l=e>0?0:o-1;for(i||(r=n[a?a[l]:l],l+=e);l>=0&&l<o;l+=e){var c=a?a[l]:l;r=t(r,n[c],c,n)}return r}(n,y(t,i,4),r,a)}};C.reduce=C.foldl=C.inject=M(1),C.reduceRight=C.foldr=M(-1),C.find=C.detect=function(e,n,t){var r=(T(e)?C.findIndex:C.findKey)(e,n,t);if(void 0!==r&&-1!==r)return e[r]},C.filter=C.select=function(e,n,t){var r=[];return n=v(n,t),C.each(e,function(e,t,i){n(e,t,i)&&r.push(e)}),r},C.reject=function(e,n,t){return C.filter(e,C.negate(v(n)),t)},C.every=C.all=function(e,n,t){n=v(n,t);for(var r=!T(e)&&C.keys(e),i=(r||e).length,a=0;a<i;a++){var o=r?r[a]:a;if(!n(e[o],o,e))return!1}return!0},C.some=C.any=function(e,n,t){n=v(n,t);for(var r=!T(e)&&C.keys(e),i=(r||e).length,a=0;a<i;a++){var o=r?r[a]:a;if(n(e[o],o,e))return!0}return!1},C.contains=C.includes=C.include=function(e,n,t,r){return T(e)||(e=C.values(e)),("number"!=typeof t||r)&&(t=0),C.indexOf(e,n,t)>=0},C.invoke=O(function(e,n,t){var r,i;return C.isFunction(n)?i=n:C.isArray(n)&&(r=n.slice(0,-1),n=n[n.length-1]),C.map(e,function(e){var a=i;if(!a){if(r&&r.length&&(e=I(e,r)),null==e)return;a=e[n]}return null==a?a:a.apply(e,t)})}),C.pluck=function(e,n){return C.map(e,C.property(n))},C.where=function(e,n){return C.filter(e,C.matcher(n))},C.findWhere=function(e,n){return C.find(e,C.matcher(n))},C.max=function(e,n,t){var r,i,a=-1/0,o=-1/0;if(null==n||"number"==typeof n&&"object"!=typeof e[0]&&null!=e)for(var l=0,c=(e=T(e)?e:C.values(e)).length;l<c;l++)null!=(r=e[l])&&r>a&&(a=r);else n=v(n,t),C.each(e,function(e,t,r){((i=n(e,t,r))>o||i===-1/0&&a===-1/0)&&(a=e,o=i)});return a},C.min=function(e,n,t){var r,i,a=1/0,o=1/0;if(null==n||"number"==typeof n&&"object"!=typeof e[0]&&null!=e)for(var l=0,c=(e=T(e)?e:C.values(e)).length;l<c;l++)null!=(r=e[l])&&r<a&&(a=r);else n=v(n,t),C.each(e,function(e,t,r){((i=n(e,t,r))<o||i===1/0&&a===1/0)&&(a=e,o=i)});return a},C.shuffle=function(e){return C.sample(e,1/0)},C.sample=function(e,n,t){if(null==n||t)return T(e)||(e=C.values(e)),e[C.random(e.length-1)];var r=T(e)?C.clone(e):C.values(e),i=S(r);n=Math.max(Math.min(n,i),0);for(var a=i-1,o=0;o<n;o++){var l=C.random(o,a),c=r[o];r[o]=r[l],r[l]=c}return r.slice(0,n)},C.sortBy=function(e,n,t){var r=0;return n=v(n,t),C.pluck(C.map(e,function(e,t,i){return{value:e,index:r++,criteria:n(e,t,i)}}).sort(function(e,n){var t=e.criteria,r=n.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(t<r||void 0===r)return-1}return e.index-n.index}),"value")};var N=function(e,n){return function(t,r,i){var a=n?[[],[]]:{};return r=v(r,i),C.each(t,function(n,i){var o=r(n,i,t);e(a,n,o)}),a}};C.groupBy=N(function(e,n,t){h(e,t)?e[t].push(n):e[t]=[n]}),C.indexBy=N(function(e,n,t){e[t]=n}),C.countBy=N(function(e,n,t){h(e,t)?e[t]++:e[t]=1});var D=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;C.toArray=function(e){return e?C.isArray(e)?u.call(e):C.isString(e)?e.match(D):T(e)?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:T(e)?e.length:C.keys(e).length},C.partition=N(function(e,n,t){e[t?0:1].push(n)},!0),C.first=C.head=C.take=function(e,n,t){return null==e||e.length<1?null==n?void 0:[]:null==n||t?e[0]:C.initial(e,e.length-n)},C.initial=function(e,n,t){return u.call(e,0,Math.max(0,e.length-(null==n||t?1:n)))},C.last=function(e,n,t){return null==e||e.length<1?null==n?void 0:[]:null==n||t?e[e.length-1]:C.rest(e,Math.max(0,e.length-n))},C.rest=C.tail=C.drop=function(e,n,t){return u.call(e,null==n||t?1:n)},C.compact=function(e){return C.filter(e,Boolean)};var R=function(e,n,t,r){for(var i=(r=r||[]).length,a=0,o=S(e);a<o;a++){var l=e[a];if(T(l)&&(C.isArray(l)||C.isArguments(l)))if(n)for(var c=0,u=l.length;c<u;)r[i++]=l[c++];else R(l,n,t,r),i=r.length;else t||(r[i++]=l)}return r};C.flatten=function(e,n){return R(e,n,!1)},C.without=O(function(e,n){return C.difference(e,n)}),C.uniq=C.unique=function(e,n,t,r){C.isBoolean(n)||(r=t,t=n,n=!1),null!=t&&(t=v(t,r));for(var i=[],a=[],o=0,l=S(e);o<l;o++){var c=e[o],u=t?t(c,o,e):c;n&&!t?(o&&a===u||i.push(c),a=u):t?C.contains(a,u)||(a.push(u),i.push(c)):C.contains(i,c)||i.push(c)}return i},C.union=O(function(e){return C.uniq(R(e,!0,!0))}),C.intersection=function(e){for(var n=[],t=arguments.length,r=0,i=S(e);r<i;r++){var a=e[r];if(!C.contains(n,a)){var o;for(o=1;o<t&&C.contains(arguments[o],a);o++);o===t&&n.push(a)}}return n},C.difference=O(function(e,n){return n=R(n,!0,!0),C.filter(e,function(e){return!C.contains(n,e)})}),C.unzip=function(e){for(var n=e&&C.max(e,S).length||0,t=Array(n),r=0;r<n;r++)t[r]=C.pluck(e,r);return t},C.zip=O(C.unzip),C.object=function(e,n){for(var t={},r=0,i=S(e);r<i;r++)n?t[e[r]]=n[r]:t[e[r][0]]=e[r][1];return t};var P=function(e){return function(n,t,r){t=v(t,r);for(var i=S(n),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(t(n[a],a,n))return a;return-1}};C.findIndex=P(1),C.findLastIndex=P(-1),C.sortedIndex=function(e,n,t,r){for(var i=(t=v(t,r,1))(n),a=0,o=S(e);a<o;){var l=Math.floor((a+o)/2);t(e[l])<i?a=l+1:o=l}return a};var L=function(e,n,t){return function(r,i,a){var o=0,l=S(r);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+l,o):l=a>=0?Math.min(a+1,l):a+l+1;else if(t&&a&&l)return r[a=t(r,i)]===i?a:-1;if(i!=i)return(a=n(u.call(r,o,l),C.isNaN))>=0?a+o:-1;for(a=e>0?o:l-1;a>=0&&a<l;a+=e)if(r[a]===i)return a;return-1}};C.indexOf=L(1,C.findIndex,C.sortedIndex),C.lastIndexOf=L(-1,C.findLastIndex),C.range=function(e,n,t){null==n&&(n=e||0,e=0),t||(t=n<e?-1:1);for(var r=Math.max(Math.ceil((n-e)/t),0),i=Array(r),a=0;a<r;a++,e+=t)i[a]=e;return i},C.chunk=function(e,n){if(null==n||n<1)return[];for(var t=[],r=0,i=e.length;r<i;)t.push(u.call(e,r,r+=n));return t};var w=function(e,n,t,r,i){if(!(r instanceof n))return e.apply(t,i);var a=A(e.prototype),o=e.apply(a,i);return C.isObject(o)?o:a};C.bind=O(function(e,n,t){if(!C.isFunction(e))throw new TypeError("Bind must be called on a function");var r=O(function(i){return w(e,r,n,this,t.concat(i))});return r}),C.partial=O(function(e,n){var t=C.partial.placeholder,r=function(){for(var i=0,a=n.length,o=Array(a),l=0;l<a;l++)o[l]=n[l]===t?arguments[i++]:n[l];for(;i<arguments.length;)o.push(arguments[i++]);return w(e,r,this,this,o)};return r}),C.partial.placeholder=C,C.bindAll=O(function(e,n){var t=(n=R(n,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var r=n[t];e[r]=C.bind(e[r],e)}}),C.memoize=function(e,n){var t=function(r){var i=t.cache,a=""+(n?n.apply(this,arguments):r);return h(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return t.cache={},t},C.delay=O(function(e,n,t){return setTimeout(function(){return e.apply(null,t)},n)}),C.defer=C.partial(C.delay,C,1),C.throttle=function(e,n,t){var r,i,a,o,l=0;t||(t={});var c=function(){l=!1===t.leading?0:C.now(),r=null,o=e.apply(i,a),r||(i=a=null)},u=function(){var u=C.now();l||!1!==t.leading||(l=u);var s=n-(u-l);return i=this,a=arguments,s<=0||s>n?(r&&(clearTimeout(r),r=null),l=u,o=e.apply(i,a),r||(i=a=null)):r||!1===t.trailing||(r=setTimeout(c,s)),o};return u.cancel=function(){clearTimeout(r),l=0,r=i=a=null},u},C.debounce=function(e,n,t){var r,i,a=function(n,t){r=null,t&&(i=e.apply(n,t))},o=O(function(o){if(r&&clearTimeout(r),t){var l=!r;r=setTimeout(a,n),l&&(i=e.apply(this,o))}else r=C.delay(a,n,this,o);return i});return o.cancel=function(){clearTimeout(r),r=null},o},C.wrap=function(e,n){return C.partial(n,e)},C.negate=function(e){return function(){return!e.apply(this,arguments)}},C.compose=function(){var e=arguments,n=e.length-1;return function(){for(var t=n,r=e[n].apply(this,arguments);t--;)r=e[t].call(this,r);return r}},C.after=function(e,n){return function(){if(--e<1)return n.apply(this,arguments)}},C.before=function(e,n){var t;return function(){return--e>0&&(t=n.apply(this,arguments)),e<=1&&(n=null),t}},C.once=C.partial(C.before,2),C.restArguments=O;var j=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=function(e,n){var t=x.length,r=e.constructor,i=C.isFunction(r)&&r.prototype||o,a="constructor";for(h(e,a)&&!C.contains(n,a)&&n.push(a);t--;)(a=x[t])in e&&e[a]!==i[a]&&!C.contains(n,a)&&n.push(a)};C.keys=function(e){if(!C.isObject(e))return[];if(_)return _(e);var n=[];for(var t in e)h(e,t)&&n.push(t);return j&&F(e,n),n},C.allKeys=function(e){if(!C.isObject(e))return[];var n=[];for(var t in e)n.push(t);return j&&F(e,n),n},C.values=function(e){for(var n=C.keys(e),t=n.length,r=Array(t),i=0;i<t;i++)r[i]=e[n[i]];return r},C.mapObject=function(e,n,t){n=v(n,t);for(var r=C.keys(e),i=r.length,a={},o=0;o<i;o++){var l=r[o];a[l]=n(e[l],l,e)}return a},C.pairs=function(e){for(var n=C.keys(e),t=n.length,r=Array(t),i=0;i<t;i++)r[i]=[n[i],e[n[i]]];return r},C.invert=function(e){for(var n={},t=C.keys(e),r=0,i=t.length;r<i;r++)n[e[t[r]]]=t[r];return n},C.functions=C.methods=function(e){var n=[];for(var t in e)C.isFunction(e[t])&&n.push(t);return n.sort()};var G=function(e,n){return function(t){var r=arguments.length;if(n&&(t=Object(t)),r<2||null==t)return t;for(var i=1;i<r;i++)for(var a=arguments[i],o=e(a),l=o.length,c=0;c<l;c++){var u=o[c];n&&void 0!==t[u]||(t[u]=a[u])}return t}};C.extend=G(C.allKeys),C.extendOwn=C.assign=G(C.keys),C.findKey=function(e,n,t){n=v(n,t);for(var r,i=C.keys(e),a=0,o=i.length;a<o;a++)if(n(e[r=i[a]],r,e))return r};var U,B,H=function(e,n,t){return n in t};C.pick=O(function(e,n){var t={},r=n[0];if(null==e)return t;C.isFunction(r)?(n.length>1&&(r=y(r,n[1])),n=C.allKeys(e)):(r=H,n=R(n,!1,!1),e=Object(e));for(var i=0,a=n.length;i<a;i++){var o=n[i],l=e[o];r(l,o,e)&&(t[o]=l)}return t}),C.omit=O(function(e,n){var t,r=n[0];return C.isFunction(r)?(r=C.negate(r),n.length>1&&(t=n[1])):(n=C.map(R(n,!1,!1),String),r=function(e,t){return!C.contains(n,t)}),C.pick(e,r,t)}),C.defaults=G(C.allKeys,!0),C.create=function(e,n){var t=A(e);return n&&C.extendOwn(t,n),t},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,n){return n(e),e},C.isMatch=function(e,n){var t=C.keys(n),r=t.length;if(null==e)return!r;for(var i=Object(e),a=0;a<r;a++){var o=t[a];if(n[o]!==i[o]||!(o in i))return!1}return!0},U=function(e,n,t,r){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var i=typeof e;return("function"===i||"object"===i||"object"==typeof n)&&B(e,n,t,r)},B=function(e,n,t,r){e instanceof C&&(e=e._wrapped),n instanceof C&&(n=n._wrapped);var i=s.call(e);if(i!==s.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(n)}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof n)return!1;var o=e.constructor,c=n.constructor;if(o!==c&&!(C.isFunction(o)&&o instanceof o&&C.isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in n)return!1}r=r||[];for(var u=(t=t||[]).length;u--;)if(t[u]===e)return r[u]===n;if(t.push(e),r.push(n),a){if((u=e.length)!==n.length)return!1;for(;u--;)if(!U(e[u],n[u],t,r))return!1}else{var d,p=C.keys(e);if(u=p.length,C.keys(n).length!==u)return!1;for(;u--;)if(d=p[u],!h(n,d)||!U(e[d],n[d],t,r))return!1}return t.pop(),r.pop(),!0},C.isEqual=function(e,n){return U(e,n)},C.isEmpty=function(e){return null==e||(T(e)&&(C.isArray(e)||C.isString(e)||C.isArguments(e))?0===e.length:0===C.keys(e).length)},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=p||function(e){return"[object Array]"===s.call(e)},C.isObject=function(e){var n=typeof e;return"function"===n||"object"===n&&!!e},C.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){C["is"+e]=function(n){return s.call(n)==="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return h(e,"callee")});var k=r.document&&r.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof k&&(C.isFunction=function(e){return"function"==typeof e||!1}),C.isFinite=function(e){return!C.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&isNaN(e)},C.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===s.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,n){if(!C.isArray(n))return h(e,n);for(var t=n.length,r=0;r<t;r++){var i=n[r];if(null==e||!d.call(e,i))return!1;e=e[i]}return!!t},C.noConflict=function(){return r._=i,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.noop=function(){},C.property=function(e){return C.isArray(e)?function(n){return I(n,e)}:m(e)},C.propertyOf=function(e){return null==e?function(){}:function(n){return C.isArray(n)?I(e,n):e[n]}},C.matcher=C.matches=function(e){return e=C.extendOwn({},e),function(n){return C.isMatch(n,e)}},C.times=function(e,n,t){var r=Array(Math.max(0,e));n=y(n,t,1);for(var i=0;i<e;i++)r[i]=n(i);return r},C.random=function(e,n){return null==n&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=C.invert(V),X=function(e){var n=function(n){return e[n]},t="(?:"+C.keys(e).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,n):e}};C.escape=X(V),C.unescape=X(Y),C.result=function(e,n,t){C.isArray(n)||(n=[n]);var r=n.length;if(!r)return C.isFunction(t)?t.call(e):t;for(var i=0;i<r;i++){var a=null==e?void 0:e[n[i]];void 0===a&&(a=t,i=r),e=C.isFunction(a)?a.call(e):a}return e};var K=0;C.uniqueId=function(e){var n=++K+"";return e?e+n:n},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,z=function(e){return"\\"+q[e]};C.template=function(e,n,t){!n&&t&&(n=t),n=C.defaults({},n,C.templateSettings);var r,i=RegExp([(n.escape||W).source,(n.interpolate||W).source,(n.evaluate||W).source].join("|")+"|$","g"),a=0,o="__p+='";e.replace(i,function(n,t,r,i,l){return o+=e.slice(a,l).replace(J,z),a=l+n.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(o+="';\n"+i+"\n__p+='"),n}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(e){throw e.source=o,e}var l=function(e){return r.call(this,e,C)},c=n.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},C.chain=function(e){var n=C(e);return n._chain=!0,n};var $=function(e,n){return e._chain?C(n).chain():n};C.mixin=function(e){return C.each(C.functions(e),function(n){var t=C[n]=e[n];C.prototype[n]=function(){var e=[this._wrapped];return c.apply(e,arguments),$(this,t.apply(C,e))}}),C},C.mixin(C),C.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=a[e];C.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],$(this,t)}}),C.each(["concat","join","slice"],function(e){var n=a[e];C.prototype[e]=function(){return $(this,n.apply(this._wrapped,arguments))}}),C.prototype.value=function(){return this._wrapped},C.prototype.valueOf=C.prototype.toJSON=C.prototype.value,C.prototype.toString=function(){return String(this._wrapped)},void 0===(t=function(){return C}.apply(n,[]))||(e.exports=t)}()}).call(this,t(4)(e))},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n){function t(){extract=((e,n)=>{certName="";var t=e.indexOf(n);if(t>=0){var r=e.indexOf(", ",t);certName=r<0?e.substr(t):e.substr(t,r-t)}return certName}),print2Digit=(e=>e<10?"0"+e:e),getCertificateDate=(e=>{var n=new Date(e);returnprint2Digit(n.getUTCDate()),print2Digit(n.getMonth()+1),n.getFullYear(),print2Digit(n.getUTCHours()),print2Digit(n.getUTCMinutes()),print2Digit(n.getUTCSeconds())}),getCertificateName=(e=>{returnextract(e,"CN=")}),getIssuer=(e=>{returnextract(e,"CN=")}),getCertificateInfoString=((e,n,t)=>{returnextract(e,"CN="),getCertificateDate(n)})}e.exports={PluginInstaled:function(){return new Promise((e,n)=>{cadesplugin.async_spawn(function*(t){try{yield cadesplugin.CreateObjectAsync("CAdESCOM.About"),e(!0)}catch(t){var r=navigator.mimeTypes["application/x-cades"];r?r.enabledPlugin&&e(!0):n(t)}})})},GetErrorMessage:function(e){var n=e.message;return n?e.number&&(n+=" ("+e.number+")"):n=e,n},Verify:function(e,n){return new Promise((t,r)=>{cadesplugin.async_spawn(function*(i){try{var a=yield cadesplugin.CreateObjectAsync("CAdESCOM.CadesSignedData");yield a.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY),yield a.propset_Content(n),yield a.VerifyCades(e,cadesplugin.CADESCOM_CADES_BES,!0),i[2](!0),t(!0)}catch(e){r(e)}},e,n,t,r)})},VerifyXml:function(e){return new Promise((n,t)=>{cadesplugin.async_spawn(function*(r){try{var i=yield cadesplugin.CreateObjectAsync("CAdESCOM.SignedXML");yield i.Verify(e),r[2](!0),n(!0)}catch(e){t(e)}},e,n,t)})},Sign:function(e,n){return new Promise((t,r)=>{cadesplugin.async_spawn(function*(i){try{var a=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield a.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var o=yield a.Certificates,l=yield o.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME,e),c="",u="",s=yield l.Count,d=1;d<=s;d++)try{var p=yield l.Item(d);if(c=yield p.SerialNumber,u=yield p.ValidToDate,new Date(u)<Date.now())continue;var _=yield cadesplugin.CreateObjectAsync("CAdESCOM.CPSigner");yield _.propset_Certificate(p),yield _.propset_TSAAddress("http://cryptopro.ru/tsp/");var f=yield cadesplugin.CreateObjectAsync("CAdESCOM.CadesSignedData");yield f.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY),yield f.propset_Content(n);var g=yield f.SignCades(_,cadesplugin.CADESCOM_CADES_BES,!0);return yield a.Close(),i[2](g),void t(!0)}catch(e){console.log(e,{serialNumber:c,validToDate:u})}yield a.Close(),console.log("Не найден подходящий сертификат",{subjectName:e}),r("Не найден подходящий сертификат")}catch(e){console.log(e),r(e)}},e,n,t,r)})},SignXml:function(e,n){return new Promise(function(t,r){cadesplugin.async_spawn(function*(i){try{var a=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield a.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var o=yield a.Certificates,l=yield o.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME,e),c="",u="",s=yield l.Count,d=1;d<=s;d++)try{var p=yield l.Item(d);if(c=yield p.SerialNumber,u=yield p.ValidToDate,new Date(u)<Date.now())continue;var _=yield cadesplugin.CreateObjectAsync("CAdESCOM.CPSigner");yield _.propset_Certificate(p),n='<?xml version="1.0" encoding="UTF-8"?>\n\x3c!-- \n Original XML doc file for sign example. \n--\x3e\n<Envelope xmlns="urn:envelope">\n  <Data>\n   Hello, World!\n  </Data>\n  <Node xml:id="nodeID">\n   Hello, Node!\n  </Node>\n \n</Envelope>';var f=yield cadesplugin.CreateObjectAsync("CAdESCOM.SignedXML");yield f.propset_Content(n),yield f.propset_SignatureType(cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING),yield f.propset_SignatureMethod(cadesplugin.XmlDsigGost3410Url),yield f.propset_DigestMethod(cadesplugin.XmlDsigGost3411Url);var g=yield f.Sign(_),C=yield verifyXml(g);if(yield a.Close(),C)return i[2](g),void t(!0)}catch(e){console.log(e,{serialNumber:c,validToDate:u})}yield a.Close(),console.log("Не найден подходящий сертификат",{subjectName:e}),r("Не найден подходящий сертификат")}catch(e){console.log(e),r(e)}},e,n,t,r)})},Decrypt:function(e,n){return new Promise(function(t,r){cadesplugin.async_spawn(function*(i){try{var a=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield a.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var o=yield a.Certificates,l=yield o.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME,e),c="",u="",s=yield l.Count,d=1;d<=s;d++)try{var p=yield l.Item(d);if(c=yield p.SerialNumber,u=yield p.ValidToDate,new Date(u)<Date.now())continue;var _=yield cadesplugin.CreateObjectAsync("CAdESCOM.CPEnvelopedData"),f=yield _.Recipients;yield f.Clear(),yield f.Add(p),yield _.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY),yield _.Decrypt(n);var g=yield _.Content;return yield a.Close(),i[2](g),void t(!0)}catch(e){console.log(e,{serialNumber:c,validToDate:u})}console.log("Не найден подходящий сертификат",{subjectName:e}),yield a.Close(),r("Не найден подходящий сертификат")}catch(e){console.log(e),r(e)}},e,n,t,r)})},CertificateParser:t,GetCertificate:function(e){return new Promise((n,t)=>{cadesplugin.async_spawn(function*(r){try{var i=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield i.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var a=yield i.Certificates,o=yield a.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME,e),l="",c="",u=yield o.Count,s=1;s<=u;s++)try{var d=yield o.Item(s);if(l=yield d.SerialNumber,c=yield d.ValidToDate,new Date(c)<Date.now())continue;var p=yield d.Export(cadesplugin.CAPICOM_ENCODE_BASE64);return yield i.Close(),void n(p)}catch(e){console.log(e,{serialNumber:l,validToDate:c})}yield i.Close(),console.log("Не найден подходящий сертификат",{subjectName:certSubjectName}),t("Не найден подходящий сертификат")}catch(e){console.log(e),t(e)}})})},GetCertificates:function(){return new Promise((e,n)=>{cadesplugin.async_spawn(function*(r){var i=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield i.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);var a=yield i.Certificates,o=yield a.Count,l={};if(0===o)return l.globalCountCertificate=0,void n({certListNotFound:!0});Array.isArray(l.globalOptionList)||(l.globalOptionList=[]);for(var c=new Date,u=0,s=1;s<=o;s++){var d=a.Item(s),p=new Date(d.ValidToDate),_=new Date(d.ValidFromDate),f=d.HasPrivateKey(),g=yield d.IsValid(),C=yield g.Result;if(c<new Date(p)&&C&&f){var E=d.GetInfo(1);E=E||"";var y=yield new t,v=yield y.getCertificateInfoString(d.SubjectName,_,E);yield l.globalOptionList.push({value:v.replace(/^cn=([^;]+);.+/i,"$1"),text:v.replace("CN=","")}),u++}}yield i.Close(),l.globalCountCertificate=u,e(l.globalOptionList,l)})})}}}]);
//# sourceMappingURL=crypto-pro.js.map