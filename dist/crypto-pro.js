!function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(r,i,function(e){return n[e]}.bind(null,i));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=1)}([function(n,e,t){(function(n){var t;!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},i=r._,o=Array.prototype,u=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,c=o.push,l=o.slice,s=u.toString,f=u.hasOwnProperty,p=Array.isArray,d=Object.keys,y=Object.create,g=function(){},v=function(n){return n instanceof v?n:this instanceof v?void(this._wrapped=n):new v(n)};e.nodeType?r._=v:(!n.nodeType&&n.exports&&(e=n.exports=v),e._=v),v.VERSION="1.9.1";var h,C=function(n,e,t){if(void 0===e)return n;switch(null==t?3:t){case 1:return function(t){return n.call(e,t)};case 3:return function(t,r,i){return n.call(e,t,r,i)};case 4:return function(t,r,i,o){return n.call(e,t,r,i,o)}}return function(){return n.apply(e,arguments)}},m=function(n,e,t){return v.iteratee!==h?v.iteratee(n,e):null==n?v.identity:v.isFunction(n)?C(n,e,t):v.isObject(n)&&!v.isArray(n)?v.matcher(n):v.property(n)};v.iteratee=h=function(n,e){return m(n,e,1/0)};var _=function(n,e){return e=null==e?n.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),r=Array(t),i=0;i<t;i++)r[i]=arguments[i+e];switch(e){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r);case 2:return n.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,n.apply(this,o)}},b=function(n){if(!v.isObject(n))return{};if(y)return y(n);g.prototype=n;var e=new g;return g.prototype=null,e},A=function(n){return function(e){return null==e?void 0:e[n]}},O=function(n,e){return null!=n&&f.call(n,e)},S=function(n,e){for(var t=e.length,r=0;r<t;r++){if(null==n)return;n=n[e[r]]}return t?n:void 0},E=Math.pow(2,53)-1,M=A("length"),w=function(n){var e=M(n);return"number"==typeof e&&e>=0&&e<=E};v.each=v.forEach=function(n,e,t){var r,i;if(e=C(e,t),w(n))for(r=0,i=n.length;r<i;r++)e(n[r],r,n);else{var o=v.keys(n);for(r=0,i=o.length;r<i;r++)e(n[o[r]],o[r],n)}return n},v.map=v.collect=function(n,e,t){e=m(e,t);for(var r=!w(n)&&v.keys(n),i=(r||n).length,o=Array(i),u=0;u<i;u++){var a=r?r[u]:u;o[u]=e(n[a],a,n)}return o};var j=function(n){return function(e,t,r,i){var o=arguments.length>=3;return function(e,t,r,i){var o=!w(e)&&v.keys(e),u=(o||e).length,a=n>0?0:u-1;for(i||(r=e[o?o[a]:a],a+=n);a>=0&&a<u;a+=n){var c=o?o[a]:a;r=t(r,e[c],c,e)}return r}(e,C(t,i,4),r,o)}};v.reduce=v.foldl=v.inject=j(1),v.reduceRight=v.foldr=j(-1),v.find=v.detect=function(n,e,t){var r=(w(n)?v.findIndex:v.findKey)(n,e,t);if(void 0!==r&&-1!==r)return n[r]},v.filter=v.select=function(n,e,t){var r=[];return e=m(e,t),v.each(n,function(n,t,i){e(n,t,i)&&r.push(n)}),r},v.reject=function(n,e,t){return v.filter(n,v.negate(m(e)),t)},v.every=v.all=function(n,e,t){e=m(e,t);for(var r=!w(n)&&v.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(!e(n[u],u,n))return!1}return!0},v.some=v.any=function(n,e,t){e=m(e,t);for(var r=!w(n)&&v.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(e(n[u],u,n))return!0}return!1},v.contains=v.includes=v.include=function(n,e,t,r){return w(n)||(n=v.values(n)),("number"!=typeof t||r)&&(t=0),v.indexOf(n,e,t)>=0},v.invoke=_(function(n,e,t){var r,i;return v.isFunction(e)?i=e:v.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),v.map(n,function(n){var o=i;if(!o){if(r&&r.length&&(n=S(n,r)),null==n)return;o=n[e]}return null==o?o:o.apply(n,t)})}),v.pluck=function(n,e){return v.map(n,v.property(e))},v.where=function(n,e){return v.filter(n,v.matcher(e))},v.findWhere=function(n,e){return v.find(n,v.matcher(e))},v.max=function(n,e,t){var r,i,o=-1/0,u=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=w(n)?n:v.values(n)).length;a<c;a++)null!=(r=n[a])&&r>o&&(o=r);else e=m(e,t),v.each(n,function(n,t,r){((i=e(n,t,r))>u||i===-1/0&&o===-1/0)&&(o=n,u=i)});return o},v.min=function(n,e,t){var r,i,o=1/0,u=1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=w(n)?n:v.values(n)).length;a<c;a++)null!=(r=n[a])&&r<o&&(o=r);else e=m(e,t),v.each(n,function(n,t,r){((i=e(n,t,r))<u||i===1/0&&o===1/0)&&(o=n,u=i)});return o},v.shuffle=function(n){return v.sample(n,1/0)},v.sample=function(n,e,t){if(null==e||t)return w(n)||(n=v.values(n)),n[v.random(n.length-1)];var r=w(n)?v.clone(n):v.values(n),i=M(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,u=0;u<e;u++){var a=v.random(u,o),c=r[u];r[u]=r[a],r[a]=c}return r.slice(0,e)},v.sortBy=function(n,e,t){var r=0;return e=m(e,t),v.pluck(v.map(n,function(n,t,i){return{value:n,index:r++,criteria:e(n,t,i)}}).sort(function(n,e){var t=n.criteria,r=e.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(t<r||void 0===r)return-1}return n.index-e.index}),"value")};var I=function(n,e){return function(t,r,i){var o=e?[[],[]]:{};return r=m(r,i),v.each(t,function(e,i){var u=r(e,i,t);n(o,e,u)}),o}};v.groupBy=I(function(n,e,t){O(n,t)?n[t].push(e):n[t]=[e]}),v.indexBy=I(function(n,e,t){n[t]=e}),v.countBy=I(function(n,e,t){O(n,t)?n[t]++:n[t]=1});var T=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(n){return n?v.isArray(n)?l.call(n):v.isString(n)?n.match(T):w(n)?v.map(n,v.identity):v.values(n):[]},v.size=function(n){return null==n?0:w(n)?n.length:v.keys(n).length},v.partition=I(function(n,e,t){n[t?0:1].push(e)},!0),v.first=v.head=v.take=function(n,e,t){return null==n||n.length<1?null==e?void 0:[]:null==e||t?n[0]:v.initial(n,n.length-e)},v.initial=function(n,e,t){return l.call(n,0,Math.max(0,n.length-(null==e||t?1:e)))},v.last=function(n,e,t){return null==n||n.length<1?null==e?void 0:[]:null==e||t?n[n.length-1]:v.rest(n,Math.max(0,n.length-e))},v.rest=v.tail=v.drop=function(n,e,t){return l.call(n,null==e||t?1:e)},v.compact=function(n){return v.filter(n,Boolean)};var D=function(n,e,t,r){for(var i=(r=r||[]).length,o=0,u=M(n);o<u;o++){var a=n[o];if(w(a)&&(v.isArray(a)||v.isArguments(a)))if(e)for(var c=0,l=a.length;c<l;)r[i++]=a[c++];else D(a,e,t,r),i=r.length;else t||(r[i++]=a)}return r};v.flatten=function(n,e){return D(n,e,!1)},v.without=_(function(n,e){return v.difference(n,e)}),v.uniq=v.unique=function(n,e,t,r){v.isBoolean(e)||(r=t,t=e,e=!1),null!=t&&(t=m(t,r));for(var i=[],o=[],u=0,a=M(n);u<a;u++){var c=n[u],l=t?t(c,u,n):c;e&&!t?(u&&o===l||i.push(c),o=l):t?v.contains(o,l)||(o.push(l),i.push(c)):v.contains(i,c)||i.push(c)}return i},v.union=_(function(n){return v.uniq(D(n,!0,!0))}),v.intersection=function(n){for(var e=[],t=arguments.length,r=0,i=M(n);r<i;r++){var o=n[r];if(!v.contains(e,o)){var u;for(u=1;u<t&&v.contains(arguments[u],o);u++);u===t&&e.push(o)}}return e},v.difference=_(function(n,e){return e=D(e,!0,!0),v.filter(n,function(n){return!v.contains(e,n)})}),v.unzip=function(n){for(var e=n&&v.max(n,M).length||0,t=Array(e),r=0;r<e;r++)t[r]=v.pluck(n,r);return t},v.zip=_(v.unzip),v.object=function(n,e){for(var t={},r=0,i=M(n);r<i;r++)e?t[n[r]]=e[r]:t[n[r][0]]=n[r][1];return t};var P=function(n){return function(e,t,r){t=m(t,r);for(var i=M(e),o=n>0?0:i-1;o>=0&&o<i;o+=n)if(t(e[o],o,e))return o;return-1}};v.findIndex=P(1),v.findLastIndex=P(-1),v.sortedIndex=function(n,e,t,r){for(var i=(t=m(t,r,1))(e),o=0,u=M(n);o<u;){var a=Math.floor((o+u)/2);t(n[a])<i?o=a+1:u=a}return o};var x=function(n,e,t){return function(r,i,o){var u=0,a=M(r);if("number"==typeof o)n>0?u=o>=0?o:Math.max(o+a,u):a=o>=0?Math.min(o+1,a):o+a+1;else if(t&&o&&a)return r[o=t(r,i)]===i?o:-1;if(i!=i)return(o=e(l.call(r,u,a),v.isNaN))>=0?o+u:-1;for(o=n>0?u:a-1;o>=0&&o<a;o+=n)if(r[o]===i)return o;return-1}};v.indexOf=x(1,v.findIndex,v.sortedIndex),v.lastIndexOf=x(-1,v.findLastIndex),v.range=function(n,e,t){null==e&&(e=n||0,n=0),t||(t=e<n?-1:1);for(var r=Math.max(Math.ceil((e-n)/t),0),i=Array(r),o=0;o<r;o++,n+=t)i[o]=n;return i},v.chunk=function(n,e){if(null==e||e<1)return[];for(var t=[],r=0,i=n.length;r<i;)t.push(l.call(n,r,r+=e));return t};var N=function(n,e,t,r,i){if(!(r instanceof e))return n.apply(t,i);var o=b(n.prototype),u=n.apply(o,i);return v.isObject(u)?u:o};v.bind=_(function(n,e,t){if(!v.isFunction(n))throw new TypeError("Bind must be called on a function");var r=_(function(i){return N(n,r,e,this,t.concat(i))});return r}),v.partial=_(function(n,e){var t=v.partial.placeholder,r=function(){for(var i=0,o=e.length,u=Array(o),a=0;a<o;a++)u[a]=e[a]===t?arguments[i++]:e[a];for(;i<arguments.length;)u.push(arguments[i++]);return N(n,r,this,this,u)};return r}),v.partial.placeholder=v,v.bindAll=_(function(n,e){var t=(e=D(e,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var r=e[t];n[r]=v.bind(n[r],n)}}),v.memoize=function(n,e){var t=function(r){var i=t.cache,o=""+(e?e.apply(this,arguments):r);return O(i,o)||(i[o]=n.apply(this,arguments)),i[o]};return t.cache={},t},v.delay=_(function(n,e,t){return setTimeout(function(){return n.apply(null,t)},e)}),v.defer=v.partial(v.delay,v,1),v.throttle=function(n,e,t){var r,i,o,u,a=0;t||(t={});var c=function(){a=!1===t.leading?0:v.now(),r=null,u=n.apply(i,o),r||(i=o=null)},l=function(){var l=v.now();a||!1!==t.leading||(a=l);var s=e-(l-a);return i=this,o=arguments,s<=0||s>e?(r&&(clearTimeout(r),r=null),a=l,u=n.apply(i,o),r||(i=o=null)):r||!1===t.trailing||(r=setTimeout(c,s)),u};return l.cancel=function(){clearTimeout(r),a=0,r=i=o=null},l},v.debounce=function(n,e,t){var r,i,o=function(e,t){r=null,t&&(i=n.apply(e,t))},u=_(function(u){if(r&&clearTimeout(r),t){var a=!r;r=setTimeout(o,e),a&&(i=n.apply(this,u))}else r=v.delay(o,e,this,u);return i});return u.cancel=function(){clearTimeout(r),r=null},u},v.wrap=function(n,e){return v.partial(e,n)},v.negate=function(n){return function(){return!n.apply(this,arguments)}},v.compose=function(){var n=arguments,e=n.length-1;return function(){for(var t=e,r=n[e].apply(this,arguments);t--;)r=n[t].call(this,r);return r}},v.after=function(n,e){return function(){if(--n<1)return e.apply(this,arguments)}},v.before=function(n,e){var t;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=null),t}},v.once=v.partial(v.before,2),v.restArguments=_;var R=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],k=function(n,e){var t=F.length,r=n.constructor,i=v.isFunction(r)&&r.prototype||u,o="constructor";for(O(n,o)&&!v.contains(e,o)&&e.push(o);t--;)(o=F[t])in n&&n[o]!==i[o]&&!v.contains(e,o)&&e.push(o)};v.keys=function(n){if(!v.isObject(n))return[];if(d)return d(n);var e=[];for(var t in n)O(n,t)&&e.push(t);return R&&k(n,e),e},v.allKeys=function(n){if(!v.isObject(n))return[];var e=[];for(var t in n)e.push(t);return R&&k(n,e),e},v.values=function(n){for(var e=v.keys(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=n[e[i]];return r},v.mapObject=function(n,e,t){e=m(e,t);for(var r=v.keys(n),i=r.length,o={},u=0;u<i;u++){var a=r[u];o[a]=e(n[a],a,n)}return o},v.pairs=function(n){for(var e=v.keys(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=[e[i],n[e[i]]];return r},v.invert=function(n){for(var e={},t=v.keys(n),r=0,i=t.length;r<i;r++)e[n[t[r]]]=t[r];return e},v.functions=v.methods=function(n){var e=[];for(var t in n)v.isFunction(n[t])&&e.push(t);return e.sort()};var B=function(n,e){return function(t){var r=arguments.length;if(e&&(t=Object(t)),r<2||null==t)return t;for(var i=1;i<r;i++)for(var o=arguments[i],u=n(o),a=u.length,c=0;c<a;c++){var l=u[c];e&&void 0!==t[l]||(t[l]=o[l])}return t}};v.extend=B(v.allKeys),v.extendOwn=v.assign=B(v.keys),v.findKey=function(n,e,t){e=m(e,t);for(var r,i=v.keys(n),o=0,u=i.length;o<u;o++)if(e(n[r=i[o]],r,n))return r};var U,L,X=function(n,e,t){return e in t};v.pick=_(function(n,e){var t={},r=e[0];if(null==n)return t;v.isFunction(r)?(e.length>1&&(r=C(r,e[1])),e=v.allKeys(n)):(r=X,e=D(e,!1,!1),n=Object(n));for(var i=0,o=e.length;i<o;i++){var u=e[i],a=n[u];r(a,u,n)&&(t[u]=a)}return t}),v.omit=_(function(n,e){var t,r=e[0];return v.isFunction(r)?(r=v.negate(r),e.length>1&&(t=e[1])):(e=v.map(D(e,!1,!1),String),r=function(n,t){return!v.contains(e,t)}),v.pick(n,r,t)}),v.defaults=B(v.allKeys,!0),v.create=function(n,e){var t=b(n);return e&&v.extendOwn(t,e),t},v.clone=function(n){return v.isObject(n)?v.isArray(n)?n.slice():v.extend({},n):n},v.tap=function(n,e){return e(n),n},v.isMatch=function(n,e){var t=v.keys(e),r=t.length;if(null==n)return!r;for(var i=Object(n),o=0;o<r;o++){var u=t[o];if(e[u]!==i[u]||!(u in i))return!1}return!0},U=function(n,e,t,r){if(n===e)return 0!==n||1/n==1/e;if(null==n||null==e)return!1;if(n!=n)return e!=e;var i=typeof n;return("function"===i||"object"===i||"object"==typeof e)&&L(n,e,t,r)},L=function(n,e,t,r){n instanceof v&&(n=n._wrapped),e instanceof v&&(e=e._wrapped);var i=s.call(n);if(i!==s.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:0==+n?1/+n==1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return a.valueOf.call(n)===a.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof e)return!1;var u=n.constructor,c=e.constructor;if(u!==c&&!(v.isFunction(u)&&u instanceof u&&v.isFunction(c)&&c instanceof c)&&"constructor"in n&&"constructor"in e)return!1}r=r||[];for(var l=(t=t||[]).length;l--;)if(t[l]===n)return r[l]===e;if(t.push(n),r.push(e),o){if((l=n.length)!==e.length)return!1;for(;l--;)if(!U(n[l],e[l],t,r))return!1}else{var f,p=v.keys(n);if(l=p.length,v.keys(e).length!==l)return!1;for(;l--;)if(f=p[l],!O(e,f)||!U(n[f],e[f],t,r))return!1}return t.pop(),r.pop(),!0},v.isEqual=function(n,e){return U(n,e)},v.isEmpty=function(n){return null==n||(w(n)&&(v.isArray(n)||v.isString(n)||v.isArguments(n))?0===n.length:0===v.keys(n).length)},v.isElement=function(n){return!(!n||1!==n.nodeType)},v.isArray=p||function(n){return"[object Array]"===s.call(n)},v.isObject=function(n){var e=typeof n;return"function"===e||"object"===e&&!!n},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){v["is"+n]=function(e){return s.call(e)==="[object "+n+"]"}}),v.isArguments(arguments)||(v.isArguments=function(n){return O(n,"callee")});var V=r.document&&r.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof V&&(v.isFunction=function(n){return"function"==typeof n||!1}),v.isFinite=function(n){return!v.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},v.isNaN=function(n){return v.isNumber(n)&&isNaN(n)},v.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)},v.isNull=function(n){return null===n},v.isUndefined=function(n){return void 0===n},v.has=function(n,e){if(!v.isArray(e))return O(n,e);for(var t=e.length,r=0;r<t;r++){var i=e[r];if(null==n||!f.call(n,i))return!1;n=n[i]}return!!t},v.noConflict=function(){return r._=i,this},v.identity=function(n){return n},v.constant=function(n){return function(){return n}},v.noop=function(){},v.property=function(n){return v.isArray(n)?function(e){return S(e,n)}:A(n)},v.propertyOf=function(n){return null==n?function(){}:function(e){return v.isArray(e)?S(n,e):n[e]}},v.matcher=v.matches=function(n){return n=v.extendOwn({},n),function(e){return v.isMatch(e,n)}},v.times=function(n,e,t){var r=Array(Math.max(0,n));e=C(e,t,1);for(var i=0;i<n;i++)r[i]=e(i);return r},v.random=function(n,e){return null==e&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))},v.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=v.invert(G),W=function(n){var e=function(e){return n[e]},t="(?:"+v.keys(n).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,e):n}};v.escape=W(G),v.unescape=W(Y),v.result=function(n,e,t){v.isArray(e)||(e=[e]);var r=e.length;if(!r)return v.isFunction(t)?t.call(n):t;for(var i=0;i<r;i++){var o=null==n?void 0:n[e[i]];void 0===o&&(o=t,i=r),n=v.isFunction(o)?o.call(n):o}return n};var q=0;v.uniqueId=function(n){var e=++q+"";return n?n+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,H=function(n){return"\\"+z[n]};v.template=function(n,e,t){!e&&t&&(e=t),e=v.defaults({},e,v.templateSettings);var r,i=RegExp([(e.escape||K).source,(e.interpolate||K).source,(e.evaluate||K).source].join("|")+"|$","g"),o=0,u="__p+='";n.replace(i,function(e,t,r,i,a){return u+=n.slice(o,a).replace(J,H),o=a+e.length,t?u+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?u+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(u+="';\n"+i+"\n__p+='"),e}),u+="';\n",e.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{r=new Function(e.variable||"obj","_",u)}catch(n){throw n.source=u,n}var a=function(n){return r.call(this,n,v)},c=e.variable||"obj";return a.source="function("+c+"){\n"+u+"}",a},v.chain=function(n){var e=v(n);return e._chain=!0,e};var $=function(n,e){return n._chain?v(e).chain():e};v.mixin=function(n){return v.each(v.functions(n),function(e){var t=v[e]=n[e];v.prototype[e]=function(){var n=[this._wrapped];return c.apply(n,arguments),$(this,t.apply(v,n))}}),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=o[n];v.prototype[n]=function(){var t=this._wrapped;return e.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],$(this,t)}}),v.each(["concat","join","slice"],function(n){var e=o[n];v.prototype[n]=function(){return $(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},void 0===(t=function(){return v}.apply(e,[]))||(n.exports=t)}()}).call(this,t(4)(n))},function(n,e,t){n.exports=t(2)},function(n,e,t){var r=t(0);console.log("window",window),console.log("underscore ",r);var i=t(5);console.log("AsyncCrypto",i);var o,u;function a(n){if(Array.isArray(n)){var e=this,t=[];return r.each(n,function(n){t.push(e.ScriptLoader(n))}),Promise.all(t)}return new Promise(function(e,t){var r=!1,i=document.getElementsByTagName("script"),o=i[i.length-1],u=document.createElement("script");u.type="text/javascript",u.src=n,u.defer=!0,u.onload=u.onreadystatechange=function(){r||readyState&&"complete"!==readyState||(r=!0,e(this))},u.onerror=u.onabort=t,o.parentNode.insertBefore(u,o.nextSibling)})}function c(){var n=navigator.userAgent.match(/chrome/i),e=navigator.userAgent.match(/opr/i);return null!=n&&(n.length>0||null!=e)}u=c();function l(n){return console.log("GetCertificate",n),c()?new Promise(function(n,e){return GetCertificates().then(function(e){return n(e)}).catch(function(n){return e(n)})}):new Promise(function(n,e){setTimeout(function(){var t=GetCertificates();return"string"==typeof t?e(t):n(t)},0)}).catch(function(n){console.log(n)})}function s(){return c()?new Promise(function(n,e){return AsyncCrypro.PluginInstaled().then(function(e){return n(e)}).catch(function(n){return e(n)})}):new Promise(function(n,e){setTimeout(function(){r.isUndefined(AsyncCrypro.PluginInstaled())&&e("Плагин не установлен");var t=AsyncCrypro.PluginInstaled();"boolean"==typeof t?e(t):n(t)},0)}.catch(function(n){console.log(n)}))}o=a("js/cadesplugin-api.js");var f={IsPluginEnable:s,ScriptLoader:a,IsChromiumBased:c,Then:function(n,e){o.then(function(){}),o.then(function(){u?cadesplugin.then(function(){s().then(function(){n(cadesplugin)},function(){e("Не установлен Крипто-про CSP")})},function(n){e(n)}):(window.addEventListener("message",function(t){"cadesplugin_loaded"===t.data?n(cadesplugin):"cadesplugin_load_error"===t.data&&e("cadesplugin_load_error"),n(cadesplugin)},!1),window.postMessage("cadesplugin_echo_request","*"))},e)},SignMessage:function(n,e){return{then:function(t,r){if(u)Sign(n,e).then(function(n){return t(n)}).catch(function(n){return r(n)});else try{var i=Sign(n,e);null===i?r(i):t(i)}catch(n){r(n)}}}},SignXmlCert:function(n,e){return{then:function(t,r){if(u)SignXml(n,e).then(function(n){return t(n)}).catch(function(n){return r(n)});else try{var i=SignXml(n,e);null===i?r(i):t(i)}catch(n){r(n)}}}},AsyncCryptoPro:AsyncCryptoPro,Dec:function(n,e){return{then:function(t,r){if(u)Decrypt(n,e).then(function(n){return t(n)}).catch(function(n){return r(n)});else try{var i=Decrypt(n,e);null===i?r(i):t(i)}catch(n){r(n)}}}},GetCertificate:l};n.exports=f},,function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){function t(){extract=((n,e)=>{certName="";var t=n.indexOf(e);if(t>=0){var r=n.indexOf(", ",t);certName=r<0?n.substr(t):n.substr(t,r-t)}return certName}),print2Digit=(n=>n<10?"0"+n:n),getCertificateDate=(n=>{const e=new Date(n);returnprint2Digit(e.getUTCDate()),print2Digit(e.getMonth()+1),e.getFullYear(),print2Digit(e.getUTCHours()),print2Digit(e.getUTCMinutes()),print2Digit(e.getUTCSeconds())}),getCertificateName=(n=>{returnextract(n,"CN=")}),getIssuer=(n=>{returnextract(n,"CN=")}),getCertificateInfoString=((n,e,t)=>{returnextract(n,"CN="),getCertificateDate(e)})}var r={PluginInstaled:function(){return new Promise((n,e)=>{cadesplugin.async_spawn(function*(t){try{yield cadesplugin.CreateObjectAsync("CAdESCOM.About"),n(!0)}catch(t){const r=navigator.mimeTypes["application/x-cades"];r?r.enabledPlugin&&n(!0):e(t)}})})},GetErrorMessage:function(n){var e=n.message;return e?n.number&&(e+=" ("+n.number+")"):e=n,e},Verify:function(n,e){return new Promise((t,r)=>{cadesplugin.async_spawn(function*(i){try{var o=yield cadesplugin.CreateObjectAsync("CAdESCOM.CadesSignedData");yield o.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY),yield o.propset_Content(e),yield o.VerifyCades(n,cadesplugin.CADESCOM_CADES_BES,!0),i[2](!0),t(!0)}catch(n){r(n)}},n,e,t,r)})},VerifyXml:function(n){return new Promise((e,t)=>{cadesplugin.async_spawn(function*(r){try{var i=yield cadesplugin.CreateObjectAsync("CAdESCOM.SignedXML");yield i.Verify(n),r[2](!0),e(!0)}catch(n){t(n)}},n,e,t)})},Sign:function(n,e){return new Promise((t,r)=>{cadesplugin.async_spawn(function*(i){try{var o=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield o.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var u=yield o.Certificates,a=yield u.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME,n),c="",l="",s=yield a.Count,f=1;f<=s;f++)try{var p=yield a.Item(f);if(c=yield p.SerialNumber,l=yield p.ValidToDate,new Date(l)<Date.now())continue;var d=yield cadesplugin.CreateObjectAsync("CAdESCOM.CPSigner");yield d.propset_Certificate(p),yield d.propset_TSAAddress("http://cryptopro.ru/tsp/");var y=yield cadesplugin.CreateObjectAsync("CAdESCOM.CadesSignedData");yield y.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY),yield y.propset_Content(e);var g=yield y.SignCades(d,cadesplugin.CADESCOM_CADES_BES,!0);return yield o.Close(),i[2](g),void t(!0)}catch(n){console.log(n,{serialNumber:c,validToDate:l})}yield o.Close();const v="Не найден подходящий сертификат";console.log(v,{subjectName:n}),r(v)}catch(n){console.log(n),r(n)}},n,e,t,r)})},SignXml:function(n,e){return new Promise(function(t,r){cadesplugin.async_spawn(function*(i){try{var o=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield o.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var u=yield o.Certificates,a=yield u.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME,n),c="",l="",s=yield a.Count,f=1;f<=s;f++)try{var p=yield a.Item(f);if(c=yield p.SerialNumber,l=yield p.ValidToDate,new Date(l)<Date.now())continue;var d=yield cadesplugin.CreateObjectAsync("CAdESCOM.CPSigner");yield d.propset_Certificate(p),e='<?xml version="1.0" encoding="UTF-8"?>\n\x3c!-- \n Original XML doc file for sign example. \n--\x3e\n<Envelope xmlns="urn:envelope">\n  <Data>\n   Hello, World!\n  </Data>\n  <Node xml:id="nodeID">\n   Hello, Node!\n  </Node>\n \n</Envelope>';var y=yield cadesplugin.CreateObjectAsync("CAdESCOM.SignedXML");yield y.propset_Content(e),yield y.propset_SignatureType(cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING),yield y.propset_SignatureMethod(cadesplugin.XmlDsigGost3410Url),yield y.propset_DigestMethod(cadesplugin.XmlDsigGost3411Url);var g=yield y.Sign(d),v=yield verifyXml(g);if(yield o.Close(),v)return i[2](g),void t(!0)}catch(n){console.log(n,{serialNumber:c,validToDate:l})}yield o.Close();const h="Не найден подходящий сертификат";console.log(h,{subjectName:n}),r(h)}catch(n){console.log(n),r(n)}},n,e,t,r)})},Decrypt:function(n,e){return new Promise(function(t,r){cadesplugin.async_spawn(function*(i){try{var o=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield o.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var u=yield o.Certificates,a=yield u.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME,n),c="",l="",s=yield a.Count,f=1;f<=s;f++)try{var p=yield a.Item(f);if(c=yield p.SerialNumber,l=yield p.ValidToDate,new Date(l)<Date.now())continue;var d=yield cadesplugin.CreateObjectAsync("CAdESCOM.CPEnvelopedData"),y=yield d.Recipients;yield y.Clear(),yield y.Add(p),yield d.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY),yield d.Decrypt(e);var g=yield d.Content;return yield o.Close(),i[2](g),void t(!0)}catch(n){console.log(n,{serialNumber:c,validToDate:l})}const v="Не найден подходящий сертификат";console.log(v,{subjectName:n}),yield o.Close(),r(v)}catch(n){console.log(n),r(n)}},n,e,t,r)})},CertificateParser:t,GetCertificate:function(n){return new Promise((e,t)=>{cadesplugin.async_spawn(function*(r){try{var i=yield cadesplugin.CreateObjectAsync("CAPICOM.Store");yield i.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var o=yield i.Certificates,u=yield o.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME,n),a="",c="",l=yield u.Count,s=1;s<=l;s++)try{var f=yield u.Item(s);if(a=yield f.SerialNumber,c=yield f.ValidToDate,new Date(c)<Date.now())continue;var p=yield f.Export(cadesplugin.CAPICOM_ENCODE_BASE64);return yield i.Close(),void e(p)}catch(n){console.log(n,{serialNumber:a,validToDate:c})}yield i.Close();const r="Не найден подходящий сертификат";console.log(r,{subjectName:certSubjectName}),t(r)}catch(n){console.log(n),t(n)}})})},GetCertificates:function(){return new Promise((n,e)=>{cadesplugin.async_spawn(function*(r){try{var i={};if(0===certificateCount)return i.globalCountCertificate=0,void e({certListNotFound:!0});Array.isArray(i.globalOptionList)||(i.globalOptionList=[]);for(var o=new Date,u=0,a=1;a<=certificateCount;a++){var c=yield certificatesObj.Item(a),l=new Date(yield c.ValidToDate),s=new Date(yield c.ValidFromDate),f=yield c.HasPrivateKey(),p=yield c.IsValid(),d=yield p.Result;if(o<new Date(l)&&d&&f){var y=yield c.GetInfo(1);y=y||"";const n=(new t).getCertificateInfoString(yield c.SubjectName,s,y);i.globalOptionList.push({value:n.replace(/^cn=([^;]+);.+/i,"$1"),text:n.replace("CN=","")}),u++}}yield certificateStore.Close(),i.globalCountCertificate=u,n(i.globalOptionList,i)}catch(n){e(n)}})})}};n.exports=r}]);
//# sourceMappingURL=crypto-pro.js.map